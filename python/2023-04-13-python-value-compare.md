---
title: 파이썬, 무조건 값 비교를 하는 특징

date: 2023-4-13

categories:
  - python
---

파이썬은 리터럴로 비교를 할 때 무조건 값 비교를 한다. 이는 모든 데이터가 객체인 파이썬의 특징과 관련이 있다.

```python
object_a = [{'a':1}, {'a':2}] 
object_b = [{'a':1}, {'a':2}]
print(object_a == object_b) # True
```

파이썬에는 원시타입 데이터가 없다. 모든 데이터는 객체이다. 하지만 프로그래머가 이를 특별히 신경써줄 필요는 없다. 왜냐하면 숫자형이나 불리언, 문자열 등을 불변객체로 관리하기 때문이다. 불변객체로 관리를 하면 사실상 원시타입과 거의 동일하다.

파이썬은 동일한 불변객체를 여러개 생성하는 비효율을 막기 위해, 이미 존재하는 값의 불변객체를 재활용한다. 이를 `인터닝(interning)`이라고 부른다.

```python
a = 1
b = 1
print(id(a)) # 10746344
print(id(b)) # 10746344 (만약 정수가 원시 타입이었다면 두 변수의 메모리 주소가 달랐을 것이다.)
```

하지만 인터닝이 항상 적용되는 것은 아니다. 파이썬 인터프리터 종류에 따라서 인터닝이 어느 정도로 적용되는지가 달라진다. 인터닝을 하려면 기존에 있는 객체를 확인해야하는 오버헤드가 있다. 따라서 여러번 중복해서 사용되지 않을 것으로 보이는 값의 경우 인터닝을 적용하지 않는 것이 보다 효율적일 수 있다.

```python
# 숫자형 예시
a = 2**128
b = 2**128
print(id(a)) # 139804603363904
print(id(b)) # 139804603361504
print(a == b) # True

# 문자열 예시
a = 'aaaaa' * 1024
b = 'aaaaa' * 1024
print(id(a)) # 16652128
print(id(b)) # 16657312
print(a == b) # True
```

인터닝이 적용되지 않는 상황에서도 같은 숫자라면 비교시에 True를 반환해야한다. 이러한 점 때문에 파이썬은 값 비교를 기본으로 하는 것이 더 적절하다. 이러한 불변객체의 비교 때문에 파이썬은 다른 객체에 대해서도 값 비교를 기본으로 하고 있는 것으로 보인다. 또한 값 비교를 기본으로 하는 방식이 로직을 작성할 때 간편한 점이 있기도 하다. 


